generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model User {
  id        String    @id @default(cuid())
  email     String    @unique
  name      String?
  password  String    
  role      Role      @default(USER)
  avatar    String?
}

enum Role {
  USER
  ADMIN
}


model Movie {
  id                            Int       @id @default(autoincrement())
  kinopoiskId                   Int?       @unique
  kinopoiskHDId                 String?
  imdbId                        String?
  nameRu                        String?
  nameEn                        String?
  nameOriginal                  String?
  year                          Int?
  posterUrl                     String?
  posterUrlPreview              String?
  coverUrl                      String?
  logoUrl                       String?
  reviewsCount                  Int?
  ratingGoodReview              Float?
  ratingGoodReviewVoteCount     Int?
  ratingKinopoisk               Float?
  ratingKinopoiskVoteCount      Int?
  ratingImdb                    Float?
  ratingImdbVoteCount           Int?
  ratingFilmCritics             Float?
  ratingFilmCriticsVoteCount    Int?
  ratingAwait                   Float?
  ratingAwaitCount              Int?
  ratingRfCritics               Float?
  ratingRfCriticsVoteCount      Int?
  webUrl                        String?
  filmLength                    Int?
  slogan                        String?
  description                   String?
  shortDescription              String?
  editorAnnotation              String?
  isTicketsAvailable            Boolean?
  productionStatus              String?
  type                          String?
  ratingMpaa                    String?
  ratingAgeLimits               String?
  hasImax                       Boolean?
  has3D                         Boolean?
  lastSync                      String?
  startYear                     Int?
  endYear                       Int?
  serial                        Boolean?
  shortFilm                     Boolean?
  completed                     Boolean?

  countries   Country[] 
  genres      Genre[]   
  photos      Photo[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Country {
  id       Int     @id @default(autoincrement())
  country  String
  movie     Movie      @relation(fields: [movieId], references: [id])
  movieId   Int 
}

model Genre {
  id     Int    @id @default(autoincrement())
  genre  String
  movie     Movie      @relation(fields: [movieId], references: [id])
  movieId   Int 
}

model Photo {
  id        Int     @id @default(autoincrement())
  imageUrl  String
  previewUrl String

  movie     Movie      @relation(fields: [movieId], references: [id])
  movieId   Int 
}